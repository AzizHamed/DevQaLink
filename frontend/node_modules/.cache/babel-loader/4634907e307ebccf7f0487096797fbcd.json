{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Win10\\\\Desktop\\\\full stack\\\\Dell Project\\\\frontend\\\\src\\\\components\\\\ReportsPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ReportsTable from './ReportsTable';\nimport ReportsChart from './ReportsChart';\nimport { Container } from '@mui/material';\nimport FailureChart from '../components/FailureChart';\nconst ReportsPage = () => {\n  const [reports, setReports] = useState([]);\n  const [passCount, setPassCount] = useState(0);\n  const [failCount, setFailCount] = useState(0);\n  const [unresolvedCount, setUnresolvedCount] = useState(0);\n  const [filteredReports, setFilteredReports] = useState(null); // State to manage filtered reports\n\n  useEffect(() => {\n    axios.get('http://localhost:3000/api/reports').then(response => {\n      const reportsData = response.data;\n\n      // חישוב הצלחות, כישלונות ו-unresolved על פי כל התוצאות במערך testResults של כל דו\"ח\n      const pass = reportsData.reduce((acc, report) => acc + report.testResults.filter(result => result === 'Success').length, 0);\n      const fail = reportsData.reduce((acc, report) => acc + report.testResults.filter(result => result === 'Failure').length, 0);\n      const unresolved = reportsData.reduce((acc, report) => acc + report.testResults.filter(result => result === 'Unresolved').length, 0);\n      setReports(reportsData);\n      setPassCount(pass);\n      setFailCount(fail);\n      setUnresolvedCount(unresolved);\n    }).catch(error => console.error('Error fetching the reports:', error));\n  }, []);\n  const handleFilter = status => {\n    if (status) {\n      // פילטר לפי התוצאות במערך testResults של כל דו\"ח\n      const filtered = reports.filter(report => report.testResults.includes(status));\n      setFilteredReports(filtered);\n    } else {\n      setFilteredReports(null); // Reset to show all reports\n    }\n  };\n  const handlePassRateClick = () => {\n    setFilteredReports(null); // Reset to show all reports\n  };\n  return /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ReportsChart, {\n    passCount: passCount,\n    failCount: failCount,\n    unresolvedCount: unresolvedCount,\n    totalTests: passCount + failCount + unresolvedCount // מספר כולל של בדיקות\n    ,\n    onSegmentClick: handleFilter // העברת הפילטר לתרשים\n    ,\n    onPassRateClick: handlePassRateClick // איפוס הפילטר\n    ,\n    reports: reports,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FailureChart, {\n    reports: reports,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ReportsTable, {\n    reports: filteredReports || reports,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }), \" \");\n};\nexport default ReportsPage;","map":{"version":3,"names":["React","useState","useEffect","axios","ReportsTable","ReportsChart","Container","FailureChart","ReportsPage","reports","setReports","passCount","setPassCount","failCount","setFailCount","unresolvedCount","setUnresolvedCount","filteredReports","setFilteredReports","get","then","response","reportsData","data","pass","reduce","acc","report","testResults","filter","result","length","fail","unresolved","catch","error","console","handleFilter","status","filtered","includes","handlePassRateClick","createElement","maxWidth","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","totalTests","onSegmentClick","onPassRateClick"],"sources":["C:/Users/Win10/Desktop/full stack/Dell Project/frontend/src/components/ReportsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ReportsTable from './ReportsTable';\nimport ReportsChart from './ReportsChart';\nimport { Container } from '@mui/material';\nimport FailureChart from '../components/FailureChart';\n\nconst ReportsPage = () => {\n  const [reports, setReports] = useState([]);\n  const [passCount, setPassCount] = useState(0);\n  const [failCount, setFailCount] = useState(0);\n  const [unresolvedCount, setUnresolvedCount] = useState(0);\n  const [filteredReports, setFilteredReports] = useState(null); // State to manage filtered reports\n\n  useEffect(() => {\n    axios.get('http://localhost:3000/api/reports')\n      .then(response => {\n        const reportsData = response.data;\n\n        // חישוב הצלחות, כישלונות ו-unresolved על פי כל התוצאות במערך testResults של כל דו\"ח\n        const pass = reportsData.reduce((acc, report) => acc + report.testResults.filter(result => result === 'Success').length, 0);\n        const fail = reportsData.reduce((acc, report) => acc + report.testResults.filter(result => result === 'Failure').length, 0);\n        const unresolved = reportsData.reduce((acc, report) => acc + report.testResults.filter(result => result === 'Unresolved').length, 0);\n\n        setReports(reportsData);\n        setPassCount(pass);\n        setFailCount(fail);\n        setUnresolvedCount(unresolved);\n      })\n      .catch(error => console.error('Error fetching the reports:', error));\n  }, []);\n\n  const handleFilter = (status) => {\n    if (status) {\n      // פילטר לפי התוצאות במערך testResults של כל דו\"ח\n      const filtered = reports.filter(report => report.testResults.includes(status));\n      setFilteredReports(filtered);\n    } else {\n      setFilteredReports(null); // Reset to show all reports\n    }\n  };\n\n  const handlePassRateClick = () => {\n    setFilteredReports(null); // Reset to show all reports\n  };\n\n  return (\n    <Container maxWidth=\"lg\">\n      <ReportsChart \n        passCount={passCount} \n        failCount={failCount} \n        unresolvedCount={unresolvedCount} \n        totalTests={passCount + failCount + unresolvedCount} // מספר כולל של בדיקות\n        onSegmentClick={handleFilter} // העברת הפילטר לתרשים\n        onPassRateClick={handlePassRateClick} // איפוס הפילטר\n        reports={reports} \n      />\n      <FailureChart reports={reports} />\n      <ReportsTable reports={filteredReports || reports} /> {/* הצגת הדוחות המסוננים או כל הדוחות */}\n    </Container>\n  );\n};\n\nexport default ReportsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}